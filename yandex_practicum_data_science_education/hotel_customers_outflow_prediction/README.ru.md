**RU** | [EN](README.md)

# Предсказание оттока клиентов отеля

- [Посмотреть Jupyter-блокнот](hotel_customers_outflow_prediction_ru.ipynb)

Стек: `numpy`, `pandas`, `seaborn`, `matplotlib`, `sklearn`, `OrdinalEncoder`, `GridSearchCV`, `RandomForestClassifier`, `DecisionTreeClassifier`

## Описание

Чтобы привлечь клиентов, сеть отелей «Как в гостях» добавила на свой сайт возможность забронировать номер без предоплаты. Однако если клиент отменял бронирование, то компания терпела убытки. Сотрудники отеля могли, например, закупить продукты к приезду гостя или просто не успеть найти другого клиента.

Чтобы решить эту проблему, вам нужно разработать систему, которая предсказывает отказ от брони. Если модель покажет, что бронь будет отменена, то клиенту предлагается внести депозит. Размер депозита — 80% от стоимости номера за одни сутки и затрат на разовую уборку. Деньги будут списаны со счёта клиента, если он всё же отменит бронь.

Бизнес-метрика и другие данные

Основная бизнес-метрика для любой сети отелей — её прибыль. Прибыль отеля — это разница между стоимостью номера за все ночи и затраты на обслуживание: как при подготовке номера, так и при проживании постояльца.

В отеле есть несколько типов номеров. В зависимости от типа номера назначается стоимость за одну ночь. Есть также затраты на уборку. Если клиент снял номер надолго, то убираются каждые два дня.

Стоимость номеров отеля:

- категория A: за ночь — 1 000, разовое обслуживание — 400
- категория B: за ночь — 800, разовое обслуживание — 350
- категория C: за ночь — 600, разовое обслуживание — 350
- категория D: за ночь — 550, разовое обслуживание — 150
- категория E: за ночь — 500, разовое обслуживание — 150
- категория F: за ночь — 450, разовое обслуживание — 150
- категория G: за ночь — 350, разовое обслуживание — 150

В ценовой политике отеля используются сезонные коэффициенты: весной и осенью цены повышаются на 20%, летом — на 40%.

Убытки отеля в случае отмены брони номера — это стоимость одной уборки и одной ночи с учётом сезонного коэффициента.

На разработку системы прогнозирования заложен бюджет — 400 000. При этом необходимо учесть, что внедрение модели должно окупиться за тестовый период. Затраты на разработку должны быть меньше той выручки, которую система принесёт компании.

## Выводы

- Было удалено небольшое количество выбросов из данных.
- Описан портрет "ненадёжного клиента" по самым значимым признакам.
- Лучшая полученная модель — случайный лес принесёт $4\ 432\ 016$ рублей прибыли.
- Доход от внедрения покрывает затраты в $400\ 000$ рублей на разработку модели и больше на $4\ 032\ 016$ рублей.
- Следовательо отвергаем нулевую гипотезу — нужно внедрять систему депозитов с использованием модели.


- Обычно количество постояльцев: 2  
- В 2016 году было больше клиентов чем в 2015  
- Самое большое кол-во клиентов в октябре, сентябре, августе, а меньше всего в марте, феврале, январе  
- Доля клиентов с младенцами 0.7%
- Доля клиентов с детьми 5.4%
- Место для автомобиля нужно для 5.7% клиентов
- В основном на 2, 3, 1, 4 дня
- Кол-во спец отметок: 0 — 62.0%, 1 — 26.1%, 2 — 9.9%


- Больше всего типов заказчика "Transient" 70.0% и они отказываются от брони меньше других, меньше всего типов "Group" 0.44% и самое большоее соотношение отказов
- Лучший канал дистрибуции "TA/TO" 83.4% среди них отказов меньше всего, худший "GDS" 0.15%, среди "Direct" больше всего отказов
- 2.7% гостей делают бронь второй раз, среди них отказов от брони больше
- В основном выбирают опцию заказа "BB" 79.2%, а меньше всего "FB" 0.70% среди них менше всего отказов, больше всего отказов среди "BB" и "SC"
- Тип забронированной комнате выбирается с таким приоритетом: A (77.2%), D (14.4%), F (1.87%), B (1.3%), G (0.91%), C (0.35%), больше всего отказов среди "C", меньше в всего среди "A"
- Страна из которой больше всего клиентов: PRT (Португалия) среди них отказов меньше всего